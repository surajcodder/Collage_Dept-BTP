sap.ui.define(["sap/ui/core/mvc/ControllerExtension","jquery.sap.global","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,jQuery,t,o){"use strict";var r;return e.extend("teacher.ext.controller.TeacherListController",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel();r="suman.senapati@peolsolutions.com"},onBeforeRendering:async function(e){debugger;var t=this.base.getExtensionAPI().getModel();if(!t){console.error("Model is not available.");return}var o;if(typeof t.getServiceUrl==="function"){o=t.getServiceUrl();console.log("Service URL:",o)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:o+"/Teacher",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,o,r){t(new Error(o+": "+r))}})});console.log("Fetched data:",e);if(e&&e.value){e.value.forEach(function(e){console.log("Teacher Name:",e.Name)})}else{console.log("No data found or invalid response format")}}catch(e){console.error("Error fetching Department data",e)}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:o+"/Roll",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,o,r){t(new Error(o+": "+r))}})});console.log("Fetched Roll data:",e);var n;if(e&&e.value){e.value.forEach(function(e){if(e.email===r){n=e.roll}})}else{console.log("No data found or invalid response format")}var a=this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.ui.table.Table")||e.isA("sap.m.Table")})[0];debugger;var i=a.getBinding("items");if(n!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Create")||e.getId().includes("Delete")){e.setVisible(false)}});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.fe.macros.controls.FilterBar")}).forEach(function(e){e.setVisible(false)});this.base.getView().getContent()[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0].mAggregations.content.setFilterConditions({$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS"],validated:"Validated"}]})}}catch(e){console.error("Error fetching Roll data",e)}}}})});
//# sourceMappingURL=TeacherListController.controller.js.map