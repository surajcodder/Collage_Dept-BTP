//@ui5-bundle teacher/Component-preload.js
sap.ui.require.preload({
	"teacher/Component.js":function(){
sap.ui.define(["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("teacher.Component",{metadata:{manifest:"json"}})});
},
	"teacher/ext/controller/TeacherListController.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension","jquery.sap.global","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,jQuery,t,r){"use strict";var o;return e.extend("teacher.ext.controller.TeacherListController",{override:{onInit:function(){var e=this.base.getExtensionAPI().getModel();var t=(new sap.ushell.services.UserInfo).getEmail();o=t},onBeforeRendering:async function(e){debugger;var t=this.base.getExtensionAPI().getModel();if(!t){console.error("Model is not available.");return}var r;if(typeof t.getServiceUrl==="function"){r=t.getServiceUrl();console.log("Service URL:",r)}else{console.error("Unable to determine the service URL.");return}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:r+"/Teacher",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,r,o){t(new Error(r+": "+o))}})});console.log("Fetched data:",e);if(e&&e.value){e.value.forEach(function(e){console.log("Teacher Name:",e.Name)})}else{console.log("No data found or invalid response format")}}catch(e){console.error("Error fetching Department data",e)}try{const e=await new Promise((e,t)=>{jQuery.ajax({url:r+"/Roll",method:"GET",dataType:"json",success:function(t){e(t)},error:function(e,r,o){t(new Error(r+": "+o))}})});console.log("Fetched Roll data:",e);var n;if(e&&e.value){e.value.forEach(function(e){if(e.email===o){n=e.roll}})}else{console.log("No data found or invalid response format")}var a=this.getView().findAggregatedObjects(true,function(e){return e.isA("sap.ui.table.Table")||e.isA("sap.m.Table")})[0];debugger;var i=a.getBinding("items");if(n!=="Admin"){this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Create")||e.getId().includes("Delete")){e.setVisible(false)}});this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.fe.macros.controls.FilterBar")}).forEach(function(e){e.setVisible(true)});this.base.getView().getContent()[0].mAggregations.header.mAggregations.content[0].mAggregations.items[0].mAggregations.content.setFilterConditions({$editState:[{operator:"DRAFT_EDIT_STATE",values:["ALL_HIDING_DRAFTS"],validated:"Validated"}]})}}catch(e){console.error("Error fetching Roll data",e)}}}})});
},
	"teacher/ext/controller/TeacherObjectContreoller.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/ControllerExtension","jquery.sap.global"],function(e,jQuery){"use strict";var t;return e.extend("teacher.ext.controller.TeacherObjectContreoller",{override:{onInit:function(){debugger;var e=this.base.getExtensionAPI().getModel();var o=(new sap.ushell.services.UserInfo).getEmail();t=o;alert(t);var n=this.getView().createId("uploadSet-uploadButton");var a=sap.ui.getCore().byId(n);if(a){console.log("Upload button ID:",a.getId())}},routing:{onBeforeBinding:async function(e){console.log("onBeforeBinding called with context:",e);if(e){console.log("Binding Context Path:",e.getPath())}else{console.log("No binding context available.");return}var t=this.base.getExtensionAPI().getModel();if(!t){console.error("Model is not available.");return}var o;if(typeof t.getServiceUrl==="function"){o=t.getServiceUrl();console.log("Service URL:",o)}else{console.error("Unable to determine the service URL.");return}this.adjustUIControls();await this.fetchAndProcessData(o)}}},adjustUIControls:function(){var e=this;setTimeout(function(){e.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")||e.isA("sap.m.DatePicker")||e.isA("sap.m.Input")||e.isA("sap.m.TextArea")||e.isA("sap.m.ComboBox")}).forEach(function(t){var o=t.getId();console.log("Control ID: ",o);debugger;if(t.isA("sap.m.Button")&&o.includes("Save")&&t.getText().includes("Create")){t.setText("Send for approval")}if(t.isA("sap.m.Button")&&o.includes("Save")&&t.getVisible()===true){debugger;var n=this.base.getView();var a=n.findAggregatedObjects(true);var r=a.filter(function(e){return e.getId().includes("uploadSet-uploader")||e.getId().includes("uploadSet-uploadButton")});r.forEach(function(e){e.setVisible(true)});var s=a.filter(function(e){return e.getId().includes("uploadSet")});s.forEach(function(e){console.log("Control ID:",e.getId());console.log("Control Type:",e.getMetadata().getName());if(e.isA("sap.m.Button")&&e.getId().includes("deleteButton")){e.setVisible(true);e.setEnabled(true)}if(e.isA("sap.m.Button")&&e.getId().includes("editButton")){e.setVisible(true);e.setEnabled(true)}});s.forEach(function(e){try{e.setUploadEnabled(true)}catch(t){console.log("Error setting UploadEnabled to false for control: ",e.getId(),t)}})}if(t.isA("sap.m.Button")&&o.includes("Save")&&t.getVisible()===false){debugger;var n=this.base.getView();var a=n.findAggregatedObjects(true);var r=a.filter(function(e){return e.getId().includes("uploadSet-uploader")||e.getId().includes("uploadSet-uploadButton")});r.forEach(function(e){e.setVisible(false)});var s=a.filter(function(e){return e.getId().includes("uploadSet")});s.forEach(function(e){console.log("Control ID:",e.getId());console.log("Control Type:",e.getMetadata().getName());if(e.isA("sap.m.Button")&&e.getId().includes("deleteButton")){e.setVisible(false);e.setEnabled(false)}if(e.isA("sap.m.Button")&&e.getId().includes("editButton")){e.setVisible(false);e.setEnabled(false)}});s.forEach(function(e){try{e.setUploadEnabled(false)}catch(t){console.log("Error setting UploadEnabled to false for control: ",e.getId(),t)}})}if(t.isA("sap.m.Input")&&o.includes("Age")){t.setEditable(false)}if(t.isA("sap.m.DatePicker")&&o.includes("DOB")){console.log("Found DOB field!");t.attachChange(function(){var o=t.getDateValue();if(o){var n=e.calculateAge(o);e.setAgeField(n)}})}}.bind(e))}.bind(e),500)},fetchAndProcessData:async function(e){var o=this;try{const t=await new Promise((t,o)=>{jQuery.ajax({url:e+"/Department",method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,n){o(new Error(t+": "+n))}})});console.log("Fetched data:",t);if(t&&t.value){t.value.forEach(function(e){console.log("Department Name:",e.DepartmentName)})}else{console.log("No data found or invalid response format")}}catch(e){console.error("Error fetching data",e)}try{const o=await new Promise((t,o)=>{jQuery.ajax({url:e+"/Roll",method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,n){o(new Error(t+": "+n))}})});console.log("Fetched Authorization data:",o);var n;if(o&&o.value){o.value.forEach(function(e){if(e.email===t){n=e.roll}})}else{console.log("No data found or invalid response format")}var a=window.location.href;var r=a.indexOf("#");var s=a.substring(r+1);var l;if(s.includes("DepartmentID")){var i=s.match(/DepartmentID='([^']+)'/);if(i&&i[1]){l=i[1]}}console.log("current url",a);console.log("sds");console.log("original hash",r);console.log("sadad",s);console.log("Department id",l);console.log("ndnd");if(n==="Admin"){debugger;console.log("same");try{var c=window.location.href;var d=c.split("#")[1];console.log(d);var u=d.match(/ttuuid=([^,]+)/)[1];console.log(u);const t=await new Promise((t,o)=>{jQuery.ajax({url:`${e}/Teacher(ttuuid=${u},IsActiveEntity=true)`,method:"GET",dataType:"json",success:function(e){t(e)},error:function(e,t,n){console.error("Error fetching role data",e,t,n);o(new Error(t+": "+n))}})});console.log(t);var g;if(t&&t.Status){console.log(t.Status);if(t.Status==="Approved"){g=t.Status;console.log("userRole: ",g)}}else{console.log("No data found or invalid response format")}this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Edit")||e.getId().includes("Delete")){if(g==="Approved"){e.setVisible(true);e.setEnabled(true)}else{e.setVisible(false);e.setEnabled(false)}}})}catch(e){console.error("Error fetching role data",e)}}else{console.log("different");this.base.getView().findAggregatedObjects(true,function(e){return e.isA("sap.m.Button")}).forEach(function(e){if(e.getId().includes("Edit")||e.getId().includes("Delete")){e.setVisible(false);e.setEnabled(false)}})}}catch(e){console.error("Error fetching Roll data",e)}}})});
},
	"teacher/ext/fragment/AttachFiles.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:upload="sap.m.upload" xmlns:macros="sap.fe.macros"><VBox id="_IDGenVBox1" core:require="{ handler: \'teacher/ext/fragment/AttachFiles\'}"><Text id="ttuuidText" text="{ttuuid}" visible="false" /><App id="app"><pages><Page id="page" showHeader="false"><upload:UploadSet\n                        id="uploadSet"\n                        instantUpload="false"\n                        uploadEnabled="true"\n                        afterItemAdded="handler.onAfterItemAdded"\n                        afterItemEdited="handler.onAfterItemEdited"\n                        uploadCompleted="handler.onUploadCompleted" \n                        afterItemRemoved="handler.onAfterItemRemoved"\n                        items="{\n                            path: \'techToFile\',\n                            parameters: {\n                                $orderby: \'createdAt desc\'\n                            },\n                            templateShareable: false\n                        }"\n                        mode="MultiSelect"\n                        ><upload:items><upload:UploadSetItem id="_IDGenUploadSetItem1"\n                                fileName="{fileName}"\n                                mediaType="{mediaType}"\n                                url="{url}"\n                                openPressed="handler.onOpenPressed"\n                                ><upload:attributes><ObjectAttribute id="_IDGenObjectAttribute1"\n                                        title="Uploaded By"\n                                        text="{createdBy}"\n                                        active="false"/><ObjectAttribute id="_IDGenObjectAttribute2"\n                                        title="Uploaded on"\n                                        text="{createdAt}"\n                                        active="false"/><ObjectAttribute id="_IDGenObjectAttribute3"\n                                        title="File Size"\n                                        text="{size}"\n                                        active="false"/></upload:attributes></upload:UploadSetItem></upload:items></upload:UploadSet></Page></pages></App></VBox></core:FragmentDefinition>\n\n\n\n\n\n',
	"teacher/ext/fragment/AttachFiles.js":function(){
sap.ui.define(["sap/m/MessageToast"],function(e){"use strict";var t;return{onAfterItemAdded:function(e){var t=e.getSource().getParent();var r=t.getBindingContext().getProperty("ttuuid");debugger;var o=e.getParameter("item");var i=e.oSource.getModel().getServiceUrl();var a=/Teacher.*$/;var s=window.location.href.match(a);if(s){var l=s[0]}var n={mediaType:o.getMediaType(),fileName:o.getFileName(),size:o.getFileObject().size,ttuuid:r};var c=window.location.href.split("#")[1];var u={url:i+l+"/techToFile",method:"POST",headers:{"Content-type":"application/json"},data:JSON.stringify(n)};new Promise((e,t)=>{$.ajax(u).done((t,r,o)=>{e(t.ID)}).fail(e=>{t(e)})}).then(e=>{var t=i+`Files(ID=${e},IsActiveEntity=false)/content`;var r=this.byId("uploadSet");o.setUrl(t);r.setUploadUrl(t);r.setHttpRequestMethod("PUT");r.uploadItem(o)}).catch(e=>{console.log(e)})},onUploadCompleted:function(t){var r=this.byId("uploadSet");r.removeAllIncompleteItems();e.show("Uploaded successfully!")},onOpenPressed:async function(e){debugger;var t=e.oSource.getModel().getServiceUrl();var r;if(e.oSource.mProperties.url.substring(0,6)==="/Files"){r=t+e.oSource.mProperties.url.substring(1)}if(r){e.oSource.mProperties.url=r}},onAfterItemRemoved:async function(e){debugger;var t=e.oSource.getModel().getServiceUrl();const r=/^(.*?),IsActiveEntity=/;let o=e.mParameters.item.mProperties.url.match(r);let i=o[1]+",IsActiveEntity=false)";i=i.replace(/^.*\/Files/,"/Files");$.ajax({url:t+i,method:"DELETE"})},onAfterItemEdited:async function(e){debugger;var t=e.oSource.getModel().getServiceUrl();const r=/^(.*?),IsActiveEntity=/;let o=e.mParameters.item.mProperties.url.match(r);let i=o[1]+",IsActiveEntity=false) ";i=i.replace(/^.*\/Files/,"/Files");let a={fileName:e.getParameter("item").getFileName()};$.ajax({url:t+i,method:"PATCH",contentType:"application/json",data:JSON.stringify(a),success:function(e){console.log("Update successful:",e)},error:function(e){console.error("Update failed:",e)}})}}});
},
	"teacher/ext/view/Attachment.controller.js":function(){
sap.ui.define(["sap/fe/core/PageController"],function(e){"use strict";return e.extend("teacher.ext.view.Attachment",{})});
},
	"teacher/ext/view/Attachment.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:macros="sap.fe.macros"\n    xmlns:html="http://www.w3.org/1999/xhtml" controllerName="teacher.ext.view.Attachment"><Page id="Attachment" title="{i18n>AttachmentTitle}"><content></content></Page></mvc:View>',
	"teacher/i18n/i18n.properties":'# This is the resource bundle for teacher\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Teacher\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n\n#XFLD,35\nflpTitle=teacher\n\n#XFLD,24\nflpTitle=lecturer\n#XTIT: Custom view title\nAttachmentTitle=Attachment\n\n#XFLD,45\nflpTitle=teacher-display\n\n#XFLD,36\nflpTitle=Teacher Page\n\n#XFLD,33\nflpTitle=Teacher App\n\n#XFLD,33\nflpTitle=Teacher App\n\n#XFLD,33\nflpTitle=Teacher App\n',
	"teacher/manifest.json":'{"_version":"1.59.0","sap.app":{"id":"teacher","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{Teacher}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.14.2","toolsId":"0ddc489d-6591-4a17-8630-9ccf38d9307b"},"dataSources":{"mainService":{"uri":"odata/v4/my/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"teacher-display":{"semanticObject":"teacher","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"lecturer-display":{"semanticObject":"lecturer","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"items":{"semanticObject":"items","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"Teacher_obj-display":{"semanticObject":"Teacher_obj","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"teacherApp-display":{"semanticObject":"teacherApp","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"TeacherApp-display":{"semanticObject":"TeacherApp","action":"display","title":"{{flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.126.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.ushell":{},"sap.fe.templates":{},"sap.fe.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"teacher.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"TeacherList","target":"TeacherList"},{"pattern":"Teacher({key}):?query:","name":"TeacherObjectPage","target":"TeacherObjectPage"}],"targets":{"TeacherList":{"type":"Component","id":"TeacherList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/Teacher","variantManagement":"None","navigation":{"Teacher":{"detail":{"route":"TeacherObjectPage"}}},"controlConfiguration":{"@com.sap.vocabularies.UI.v1.LineItem":{"tableSettings":{"type":"ResponsiveTable"}}},"initialLoad":"Enabled","views":{"paths":[{"key":"tableView","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView"},{"key":"tableView1","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView1"},{"key":"tableView2","annotationPath":"com.sap.vocabularies.UI.v1.SelectionPresentationVariant#tableView2"}]}}}},"TeacherObjectPage":{"type":"Component","id":"TeacherObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/Teacher","navigation":{},"content":{"body":{"sections":{"AttachFiles":{"template":"teacher.ext.fragment.AttachFiles","position":{"placement":"After","anchor":"GeneratedFacet1"},"title":"File Attachment"}}}}}}}}},"extends":{"extensions":{"sap.ui.controllerExtensions":{"sap.fe.templates.ListReport.ListReportController":{"controllerName":"teacher.ext.controller.TeacherListController"},"sap.fe.templates.ObjectPage.ObjectPageController":{"controllerName":"teacher.ext.controller.TeacherObjectContreoller"}}}}},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"Dept_router"}}'
});
//# sourceMappingURL=Component-preload.js.map
